<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TENNIS_DOM</title>
</head>
<body>
    <input type="button" value='старт!' onclick='start()'>
    <div id='countId'></div>
    <div id='fieldId'></div>
    <script>
        'use strict'
        //field
        let widthField=500;
        let heightField=300;
        let field=document.getElementById('fieldId');
        field.style.position='relative';
        field.style.width=widthField+'px';
        field.style.height=heightField+'px';
        field.style.backgroundColor='#F0EE7E';
        field.style.border='1px solid black';

        //ball
        let widthBall=widthField*0.05;
        let heightBall=widthBall;
        let ball=document.createElement('div');
        ball.style.position='absolute';
        ball.style.width=widthBall+'px';
        ball.style.height=heightBall+'px';
        ball.style.backgroundColor='#F02137';
        ball.style.borderRadius='50%';
        field.appendChild(ball);

        let ballObj={
            posX: widthField/2,
            posY: heightField/2,
            speedX: 4,
            speedY: 1,
            accelX: 0.5,
            width: widthBall,
            height: heightBall,

            update: function(){
                ball.style.left=Math.round(this.posX)+'px';
                ball.style.top=Math.round(this.posY)+'px';
            }
        }

        //count
        let count=document.getElementById('countId');
        count.style.cssText='font: 38px Arial, sans-serif; text-align: center';
        count.style.width=widthField+'px';
        let pointLeft=0;
        let pointRight=0;
        let countText=document.createTextNode(`${pointLeft}:${pointRight}`);
        count.appendChild(countText)


        function Rocket(){
        let widthRocket=widthField*0.015;
        let heightRocket=heightField*0.25;
        let rocketLeft=document.createElement('div');
        rocketLeft.style.position='absolute';
        rocketLeft.style.width=widthRocket+'px';
        rocketLeft.style.height=heightRocket+'px';
        rocketLeft.style.backgroundColor='#09AA57';
        }



        var RAF=
        window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback)
            { window.setTimeout(callback, 1000 / 60); }

        function start(){
            RAF(tick);
           // RAF(moverocket);          
        }

        function tick(){
           // ballObj.speedX+=ballObj.accelX;
            ballObj.posX+=ballObj.speedX;
            // let pointLeft=0;
            // let pointRight=0;
            // let countText;
            //вылетел ли мяч правее стены?
            if (ballObj.posX+ballObj.width>widthField){
                ballObj.speedX=-ballObj.speedX;
                ballObj.posX=widthField-ballObj.width;
              //  console.log(pointLeft++)
                 countText=`${pointLeft+=1}:${pointRight}`;
                count.innerHTML=countText

                 //countText=document.createTextNode(`${pointLeft++}:${pointRight}`);
                // count.appendChild(countText, countText)
            }

                //вылетел ли мяч левее стены?
                if (ballObj.posX<0){
                    ballObj.speedX=-ballObj.speedX;
                ballObj.posX=0;
               // pointRight++
             countText=`${pointLeft}:${pointRight+=1}`;
                count.innerHTML=countText
           // console.log(pointRight++)
            }

            ballObj.posY+=ballObj.speedY;
            //вылетел ли мяч ниже?
            if(ballObj.posY+ballObj.height>heightField){
                ballObj.speedY=-ballObj.speedY;
                ballObj.posY=heightField-ballObj.height;
            }

            if(ballObj.posY<0){
                ballObj.speedY=-ballObj.speedY;
                ballObj.posY=0;

            }
            ballObj.update();
            RAF(tick);

        }
        ballObj.update();

        //rocketLeft
        let widthRocket=widthField*0.015;
        let heightRocket=heightField*0.25;
        let rocketLeft=document.createElement('div');
        rocketLeft.style.position='absolute';
        rocketLeft.style.width=widthRocket+'px';
        rocketLeft.style.height=heightRocket+'px';
        rocketLeft.style.backgroundColor='#09AA57';
        field.appendChild(rocketLeft)

        //rocketRight
        let rocketRight=document.createElement('div');
        rocketRight.style.position='absolute';
        rocketRight.style.right=0+'px';
        rocketRight.style.width=widthRocket+'px';
        rocketRight.style.height=heightRocket+'px';
        rocketRight.style.backgroundColor='#191497';
        field.appendChild(rocketRight);

        let rocketObj={
            posX: 0,
            posY: 0,
            speedY: 4,
            height: heightRocket,

            updateRight: function(){
                rocketRight.style.top=this.posY+'px'
               
            },

            updateLeft: function(){
                rocketLeft.style.top=this.posY+'px'
            }
        }

        function up(){
            rocketObj.posY-=rocketObj.speedY;
             if(rocketObj.posY<0){
                rocketObj.posY=0;
            }
        }
        function down(){
            rocketObj.posY+=rocketObj.speedY;
             if(rocketObj.posY+rocketObj.height>heightField){
                rocketObj.posY=heightField-rocketObj.height;
            }
        }

        window.addEventListener('keydown', moverocket)
        function moverocket(EO){
            EO=EO||window.event;

            if(EO.key=='Shift'){
                console.log('Shift')
                // rocketObj.posY+=rocketObj.speedY;
                RAF(up);
                //up();
                rocketObj.updateLeft();

                
            } else if(EO.key=='Control'){
                console.log('Ctrl')
                down()
                rocketObj.updateLeft();
            }

            if (EO.key=='ArrowUp'){
                console.log('ArrowUp')
                //rocketObj.posY-=rocketObj.speedY;
                RAF(up);
                //up();
                rocketObj.updateRight();
            } else if(EO.key=='ArrowDown'){
                console.log('ArrowDown')
                down()
                rocketObj.updateRight();
                // rocketObj.posY+=rocketObj.speedY;
                // rocketObj.update();
            }

            // rocketObj.posY+=rocketObj.speedY;
            // if(rocketObj.posY+rocketObj.height>heightField){
            //     rocketObj.speedY=-rocketObj.speedY;
            //     rocketObj.posY=heightField-rocketObj.height;
            // }

            // if(rocketObj.posY<0){
            //     rocketObj.speedY=-rocketObj.speedY;
            //     rocketObj.posY=0;
            // }

            // rocketObj.update();
            // RAF(moverocket);  



            


//console.log(EO.code)
    }

  //  rocketObj.update();
    

    //https://developer.mozilla.org/ru/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript/Paddle_and_keyboard_controls
    </script>
    
</body>
</html>



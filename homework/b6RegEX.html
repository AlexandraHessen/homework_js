<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B6</title>
</head>
<body>
    <script>
        'use strict'
    </script>
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>B6</title>
    </head>
    <body>
        <script>
            'use strict'
            function formatNumber (numb, form){
                let afterDot;
                let between;
                let beforeDot;
                if (form.indexOf('.')!=-1){ //находим количество знаков после точки в форме
                    afterDot=form.slice(form.indexOf('.')+1).length; 
                } 
                for (let i=0; i<form.length; i++){ //находим разделить в форме
                    if (!(form[i]=='.'||form[i]=='#')){
                        between=form[i];
                    } 
                }
                if (form.indexOf('.'!=-1)){
                    let beforeDotStr;
                    beforeDotStr=form.slice(form.indexOf('.')+1);
                    for(let i=0; i<beforeDotStr.length; i++){
                        // console.log("beforeDotStr"+beforeDotStr);
                        // console.log('beforeDotStr.lastIndexOf(between)'+beforeDotStr.lastIndexOf(between));
                        beforeDot=beforeDotStr.length-(beforeDotStr.lastIndexOf(between)+1);
                    }

                }else{
                    for (let i=0; i<form.length; i++){
                        beforeDot=form.length-(form.lastIndexOf(between)+1);
                    }

                }
console.log('beforeDot'+beforeDot);
// console.log('typeof' +(typeof beforeDot));
// beforeDot=beforeDot*1;

                numb=numb.toFixed(afterDot); // устанавливаем количество знаков после точки как в форме; все это время переменная type number 
                //const regex = new RegExp(`ReGeX${testVar}ReGeX`);
                // /^\d{0,3}$/g;	
                // `^\\d{0,${x}}$`, 'g'
                const regex = new RegExp(`\\B(?=(?:\\d{${beforeDot}})+(?!\\d))`, 'g');
                   numb = numb.toString().replace(regex, between); //выделяем разряды в целой части, разделитель по форме
                // numb = numb.toString().replace(/\B(?=(?:\d{2})+(?!\d))/g, between); //выделяем разряды в целой части, разделитель по форме
               // numb = numb.toString().replace('/\B(?=(?:\d{'+beforeDot+'})+(?!\d))/g', between);
               //numb = numb.toString().replace(/(\d)(?=(\d{3})+([^\d]|$))/g, between);
//numb = numb.toString().replace(/(\d)(?=(\d{3})+([^\d]|$))/g, '$1 ');
                return numb;
            }

            console.log( formatNumber(2.3,"# ### ###.##") );
            // выдаёт "2.30"
            console.log( formatNumber(12345.368,"# ### ###.##") );
            // выдаёт "12 345.37"
            console.log('956352645.368,"#_###_###.##" '+ formatNumber(956352645.368,"#_###_###.##") );
            console.log( '5418566345.333,"#,###,###.##" '+formatNumber(5418566345.333,"#,###,###.##") );
            console.log( '123015,"##:##:##" '+formatNumber(123015,"##:##:##") );
            console.log( '3,"# ### ###.###" '+formatNumber(3,"# ### ###.###") );
            console.log( '12345.368,"# ### ###.#" '+formatNumber(12345.368,"# ### ###.#") );
            console.log( '59.368,"# ### ###" '+formatNumber(59.368,"# ### ###") );
            console.log( '345.32,"# ### ###.###" '+formatNumber(345.32,"# ### ###.###") );      
        </script>      
    </body>
    </html>
</body>
</html>